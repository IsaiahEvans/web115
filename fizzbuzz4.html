<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WEB115 — FizzBuzz 4</title>

  <link rel="stylesheet" href="styles/default.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;800&display=swap" rel="stylesheet">

    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon-180.png">
  <link rel="icon" type="image/png" sizes="512x512" href="images/favicon-512.png">
</head>
<body>
  <header class="wrap">
      <a class="brand" href="index.html" aria-label="Streamline Studios — Home">
    <img src="images/streamline-logo.svg" alt="Streamline Studios" width="160" height="40">
  </a>
    <nav aria-label="Main">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="introduction.html">Introduction</a></li>
        <li><a href="contract.html">Contract</a></li>
        <li><a href="brand.html">Brand</a></li>
        <li><a href="fizzbuzz0.html">FizzBuzz 0</a></li>
        <li><a href="fizzbuzz1.html">FizzBuzz 1</a></li>
        <li><a href="fizzbuzz2.html">FizzBuzz 2</a></li>
        <li><a href="fizzbuzz3.html">FizzBuzz 3</a></li>
        <li><a href="fizzbuzz4.html" aria-current="page">FizzBuzz 4</a></li>
        <li><a href="intro-form.html">intro-form 4</a></li>
        <li><a href="onepage_original/">One-Page (Original)</a></li>
        <li><a href="onepage_site/">One-Page (Brand)</a></li>



      </ul>
    </nav>
  </header>

  <main id="content" class="wrap">
    <h2>FizzBuzz 4 — Everything</h2>
    <p class="small">
      Enter your name, choose the total to count, then set three divisors and one-word outputs.
      Optionally add a word for numbers that match none (leave blank to show nothing).
    </p>

    <h3 id="greeting" class="center">Greetings!</h3>

    <!-- Name + total -->
    <div class="form-container">
      <form id="nameForm" novalidate>
        <label for="first_name">First Name</label>
        <input type="text" id="first_name" placeholder="Enter your first name" required>

        <label for="middle_initial">Middle Initial</label>
        <input type="text" id="middle_initial" placeholder="M" maxlength="1" aria-label="Middle initial (optional)">

        <label for="last_name">Last Name</label>
        <input type="text" id="last_name" placeholder="Enter your last name" required>

        <label for="total">Total</label>
        <input type="number" id="total" value="125" min="1" step="1" aria-label="How high to count">

        <button class="button" type="submit">Start</button>
      </form>
      <p id="errors" class="center small" style="color:#b00020;margin-top:.5rem;"></p>
    </div>

    <!-- Divisors + words (reveal after submit) -->
    <form id="optionsForm" class="mt-2 center hidden" aria-label="Options">
      <span class="small" style="display:inline-block;margin-right:.5rem;">Divisors &amp; words (one word each):</span>
      <input type="number" id="div1" value="3" min="1" step="1" aria-label="First divisor">
      <input type="text"   id="word1" value="Turbo" aria-label="Word for first divisor">

      <input type="number" id="div2" value="5" min="1" step="1" aria-label="Second divisor">
      <input type="text"   id="word2" value="Traction" aria-label="Word for second divisor">

      <input type="number" id="div3" value="7" min="1" step="1" aria-label="Third divisor">
      <input type="text"   id="word3" value="Bang!" aria-label="Word for third divisor">

      <span class="small" style="display:inline-block;margin-left:.5rem;">Else:</span>
      <input type="text"   id="elseWord" value="" placeholder="(blank by default)" aria-label="Word when none match">

      <button class="button" type="submit">Apply &amp; Regenerate</button>
    </form>

    <section class="mt-2" aria-labelledby="output-title">
      <h3 id="output-title">Output</h3>
      <ol id="output" class="mt-1"></ol>
    </section>

    <p class="small">
      Example test cases: 21 (1st·3rd), 15 (1st·2nd), 35 (2nd·3rd), 105 (1st·2nd·3rd).
    </p>
 </main>

  <footer class="wrap site-footer">
    <nav aria-label="Profile links" class="footer-links">
      <a href="https://github.com/IsaiahEvans" target="_blank" rel="noopener">GitHub</a>
      <a href="https://isaiahevans.github.io" target="_blank" rel="noopener">GitHub.io</a>
      <a href="https://www.freecodecamp.org/Isaiah_Evans21" target="_blank" rel="noopener">freeCodeCamp</a>
      <a href="https://www.codecademy.com/profiles/Staticsnoise" target="_blank" rel="noopener">Codecademy</a>
      <a href="https://jsfiddle.net/u/staticsnoise/fiddles" target="_blank" rel="noopener">JSFiddle</a>
      <a href="streamlinestudios.com/">Site Designed by Streamline Studios</a>

    
    </nav>
    <nav aria-label="Validation links" class="footer-links">
      <a href="https://validator.w3.org/nu/" target="_blank" rel="noopener">HTML Validator</a>
      <a href="https://jigsaw.w3.org/css-validator/" target="_blank" rel="noopener">CSS Validator</a>
    </nav>
    <div class="footer-meta">
      <span>© 2025 Isaiah Evans</span>
      <a href="#content">Back to top</a>
      <span>Page built by Isaiah Evans</span>
    </div>
  </footer>

  <script>
    "use strict";

    // helpers
    const $ = (id) => document.getElementById(id);
    const cap = (s) => (s ? s.trim().toLowerCase().replace(/^\w/, (c) => c.toUpperCase()) : "");

    // DOM
    const form = $("nameForm");
    const optionsForm = $("optionsForm");
    const greetingEl = $("greeting");
    const errorsEl = $("errors");
    const outputEl = $("output");

    const totalEl = $("total");

    const div1El = $("div1"), word1El = $("word1");
    const div2El = $("div2"), word2El = $("word2");
    const div3El = $("div3"), word3El = $("word3");
    const elseEl = $("elseWord");

    // tiny blocklist (keep class-safe)
    const BAD_WORDS = ["nigg","fag","retard","bitch","slut","whore","cunt","kike","chink","spic"];
    const isClean = (s) => !BAD_WORDS.some((b) => (s || "").toLowerCase().includes(b));

    // one-word cleaner (letters/hyphen allowed; optional ! or ? at end)
    function cleanOneWord(raw, fallback){
      if (!raw) return fallback;
      let s = raw.replace(/<[^>]*>/g, "");
      // collapse whitespace to a single token; keep letters and hyphen
      s = s.replace(/[^a-z\-!? ]/gi, " ").trim().split(/\s+/)[0] || "";
      if (!s || !isClean(s)) return fallback;
      if (s.length > 16) s = s.slice(0, 16);
      // keep trailing ! or ?
      const punct = /[!?]$/.test(s) ? s.slice(-1) : "";
      s = s.replace(/[!?]$/, "");
      s = cap(s) + punct;
      return s;
    }

    function checkDivision(n, d){ return d !== 0 && n % d === 0; }

    function getRules(){
      const d1 = Math.max(1, parseInt(div1El.value || "3", 10));
      const d2 = Math.max(1, parseInt(div2El.value || "5", 10));
      const d3 = Math.max(1, parseInt(div3El.value || "7", 10));
      const w1 = cleanOneWord(word1El.value || "Turbo", "Turbo");
      const w2 = cleanOneWord(word2El.value || "Traction", "Traction");
      const w3 = cleanOneWord(word3El.value || "Bang!", "Bang!");
      const wElse = cleanOneWord(elseEl.value || "", "");
      // reflect sanitized values back into inputs if changed
      word1El.value = w1; word2El.value = w2; word3El.value = w3; elseEl.value = wElse;
      return { rules: [ {div:d1, word:w1}, {div:d2, word:w2}, {div:d3, word:w3} ], elseWord: wElse };
    }

    function renderList(total, rules, elseWord){
      outputEl.innerHTML = "";
      const t = Math.max(1, parseInt(total || "125", 10));
      for (let n = 1; n <= t; n++) {
        const parts = [];
        for (const r of rules) {
          if (checkDivision(n, r.div)) parts.push(r.word);
        }
        const msg = parts.length ? parts.join(", ") : elseWord;
        const li = document.createElement("li");
        li.textContent = msg ? `${n}. ${msg}` : `${n}.`;
        outputEl.appendChild(li);
      }
    }

    // submit → greet + show options + first render
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      errorsEl.textContent = "";

      const first = cap($("first_name").value);
      const mid   = ($("middle_initial").value.trim()[0] || "").toUpperCase();
      const last  = cap($("last_name").value);
      const total = totalEl.value;

      if (!first || !last) {
        errorsEl.textContent = "Please enter your first and last name.";
        (!first ? $("first_name") : $("last_name")).focus();
        return;
      }

      const full = mid ? `${first} ${mid}. ${last}` : `${first} ${last}`;
      greetingEl.textContent = `Welcome to Streamline Studios, ${full}!`;

      optionsForm.classList.remove("hidden");

      const { rules, elseWord } = getRules();
      renderList(total, rules, elseWord);
    });

    // change options → regenerate
    optionsForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const { rules, elseWord } = getRules();
      renderList(totalEl.value, rules, elseWord);
    });
  </script>

  <!-- validator bubble -->
  <script src="https://lint.page/kit/880bd5.js" crossorigin="anonymous"></script>
</body>
</html>
